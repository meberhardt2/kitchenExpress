"use strict";(self.webpackChunkkitchen=self.webpackChunkkitchen||[]).push([[643],{374:function(e,n,t){var a=t(671),r=t(144),c=t(573),o="",i=window&&window.location&&window.location.hostname;"dev.eberhardt.cloud"===i&&(o="http://dev.eberhardt.cloud:4000"),"www.eberhardt.cloud"===i&&(o="https://eberhardt.cloud"),"eberhardt.cloud"===i&&(o="https://eberhardt.cloud");var d="".concat(o),u=function(){function e(){(0,a.Z)(this,e)}return(0,r.Z)(e,null,[{key:"getBookmark",value:function(){return(0,c.Z)({method:"GET",url:d+"/api/bookmark"}).then((function(e){return e.data}))}},{key:"addBookmark",value:function(e){return(0,c.Z)({method:"POST",url:d+"/api/bookmark",data:e}).then((function(e){return e.data}))}},{key:"getTags",value:function(){return(0,c.Z)({method:"GET",url:d+"/api/tags"}).then((function(e){return e.data}))}},{key:"addTag",value:function(e){return(0,c.Z)({method:"POST",url:d+"/api/tags",data:e}).then((function(e){return e.data}))}},{key:"deleteTag",value:function(e){return(0,c.Z)({method:"DELETE",url:"".concat(d,"/api/tags/").concat(e)}).then((function(e){return e.data}))}},{key:"updateTag",value:function(e){return(0,c.Z)({method:"PATCH",url:"".concat(d,"/api/tags/").concat(e.id),data:e}).then((function(e){return e.data}))}},{key:"addRecipe",value:function(e){return(0,c.Z)({method:"POST",url:"".concat(d,"/api/recipe"),data:e}).then((function(e){return e.data}))}},{key:"deleteRecipe",value:function(e){return(0,c.Z)({method:"DELETE",url:"".concat(d,"/api/recipe/").concat(e)}).then((function(e){return e.data}))}},{key:"saveRecipe",value:function(e){return(0,c.Z)({method:"PATCH",url:"".concat(d,"/api/recipe/").concat(e.id),data:e}).then((function(e){return e.data}))}},{key:"search",value:function(e){return(0,c.Z)({method:"POST",url:"".concat(d,"/api/search"),data:e}).then((function(e){return e.data}))}},{key:"random",value:function(){return(0,c.Z)({method:"POST",url:"".concat(d,"/api/random")}).then((function(e){return e.data}))}},{key:"getRecipe",value:function(e){return(0,c.Z)({method:"GET",url:"".concat(d,"/api/recipe/").concat(e)}).then((function(e){return e.data}))}},{key:"cameraUpload",value:function(e){return(0,c.Z)({method:"POST",url:"".concat(d,"/api/camera"),data:e}).then((function(e){return e.data}))}},{key:"gmail",value:function(e){return(0,c.Z)({method:"POST",url:"".concat(d,"/api/recipe/").concat(e.id,"/gmail"),data:e}).then((function(e){return e.data}))}},{key:"sendgrid",value:function(e){return(0,c.Z)({method:"POST",url:"".concat(d,"/api/recipe/").concat(e.id,"/sendgrid"),data:e}).then((function(e){return e.data}))}},{key:"upload",value:function(e){var n=new FormData;n.append(e.filename,e.file);var t=new Request("".concat(d,"/api/upload"),{method:"POST","content-type":"multipart/form-data",body:n});return fetch(t).then((function(e){return e.json()})).catch((function(e){return alert("Server error."),e}))}}]),e}();n.Z=u},129:function(e,n,t){t.r(n),t.d(n,{default:function(){return p}});var a=t(942),r=t(413),c=t(439),o=t(313),i=t(673),d=t.n(i),u=t(274),s=(t(953),t(374)),l=t(417);var m=function(e){return(0,l.jsxs)(o.Fragment,{children:[(0,l.jsxs)("div",{className:"row",children:[(0,l.jsx)("div",{className:"col-12 col-md-2",children:"Name"}),(0,l.jsx)("div",{className:"col-12 col-md-7",children:(0,l.jsx)("input",{type:"text",className:"form-control",name:"recipe_name",onChange:e.handleInputChange,value:e.recipe_name||""})})]}),(0,l.jsxs)("div",{className:"row",children:[(0,l.jsx)("div",{className:"col-12 col-md-2",children:"Recipe"}),(0,l.jsx)("div",{className:"col-12 col-md-8",children:(0,l.jsx)("textarea",{name:"recipe",value:e.recipe,onChange:e.handleInputChange,className:"form-control ocr-textbox"})})]})]})};var h=function(e){return(0,l.jsxs)(o.Fragment,{children:[(0,l.jsx)("div",{className:"row button-row",children:(0,l.jsxs)("div",{className:"col-12",children:[(0,l.jsx)("button",{type:"button",className:"btn btn-primary",onClick:e.addRecipe,children:"Add"}),(0,l.jsx)("button",{type:"button",className:"btn btn-primary",onClick:e.backToCamera,children:"Back To Camera"})]})}),(0,l.jsx)("br",{}),(0,l.jsx)("br",{})]})};var p=function(){var e=(0,o.useState)({showCamera:!0,showPictureForm:!1,binaryData:"",recipe:"",recipe_name:""}),n=(0,c.Z)(e,2),t=n[0],i=n[1],p=function(){i((0,r.Z)((0,r.Z)({},t),{},{recipe_name:"",recipe:"",showCamera:!0,showPictureForm:!1}))},f=function(){var e=JSON.parse(JSON.stringify(t)),n=!1;if(""===t.recipe_name&&(n=!0,u.Am.error("Missing recipe name")),""===t.recipe&&(n=!0,u.Am.error("Missing recipe")),!n){var a={recipe_name:e.recipe_name,recipe:e.recipe,bookmarked:"n",ingredients:"",tags:[]};document.getElementById("spinner-holder").style.display="block",s.Z.addRecipe(a).then((function(e){document.getElementById("spinner-holder").style.display="none","undefined"===typeof e||"undefined"===typeof e.status||"forbidden"===e.status?u.Am.error("Denied"):"ok"===e.status&&(0!==parseInt(e.id)?(u.Am.success("Recipe added!"),i((0,r.Z)((0,r.Z)({},t),{},{recipe_name:"",recipe:"",showCamera:!0,showPictureForm:!1}))):u.Am.error("There was an error saving"))}))}};return(0,l.jsxs)(o.Fragment,{children:[(0,l.jsx)("div",{className:t.showCamera?"":"hidden",children:(0,l.jsx)(d(),{onTakePhoto:function(e){!function(e){var n=e.split(",")[1];document.getElementById("spinner-holder").style.display="block";var a={image:n};s.Z.cameraUpload(a).then((function(e){document.getElementById("spinner-holder").style.display="none","undefined"===typeof e||"undefined"===typeof e.status||"forbidden"===e.status?u.Am.error("Denied"):"ok"===e.status&&i((0,r.Z)((0,r.Z)({},t),{},{recipe:e.text,showCamera:!1,showPictureForm:!0}))}))}(e)},idealFacingMode:"environment",isImageMirror:!1})}),(0,l.jsxs)("div",{className:t.showPictureForm?"":"hidden",children:[(0,l.jsx)(h,{addRecipe:f,backToCamera:p}),(0,l.jsx)(m,{handleInputChange:function(e){var n=e.target,c=n.name,o=n.value;i((0,r.Z)((0,r.Z)({},t),{},(0,a.Z)({},c,o)))},recipe:t.recipe,recipe_name:t.recipe_name}),(0,l.jsx)(h,{addRecipe:f,backToCamera:p})]})]})}}}]);