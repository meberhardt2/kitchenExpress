"use strict";(self.webpackChunkkitchen=self.webpackChunkkitchen||[]).push([[153],{374:function(e,t,n){var a=n(671),o=n(144),r=n(573),d=window&&window.location&&window.location.hostname;var i="".concat("devprod.eberhardt.cloud"===d?"http://devprod.eberhardt.cloud:4100":""),c=function(){function e(){(0,a.Z)(this,e)}return(0,o.Z)(e,null,[{key:"getBookmark",value:function(){return(0,r.Z)({method:"GET",url:i+"/api/bookmark"}).then((function(e){return e.data}))}},{key:"addBookmark",value:function(e){return(0,r.Z)({method:"POST",url:i+"/api/bookmark",data:e}).then((function(e){return e.data}))}},{key:"getTags",value:function(){return(0,r.Z)({method:"GET",url:i+"/api/tags"}).then((function(e){return e.data}))}},{key:"addTag",value:function(e){return(0,r.Z)({method:"POST",url:i+"/api/tags",data:e}).then((function(e){return e.data}))}},{key:"deleteTag",value:function(e){return(0,r.Z)({method:"DELETE",url:"".concat(i,"/api/tags/").concat(e)}).then((function(e){return e.data}))}},{key:"updateTag",value:function(e){return(0,r.Z)({method:"PATCH",url:"".concat(i,"/api/tags/").concat(e.id),data:e}).then((function(e){return e.data}))}},{key:"addRecipe",value:function(e){return(0,r.Z)({method:"POST",url:"".concat(i,"/api/recipe"),data:e}).then((function(e){return e.data}))}},{key:"deleteRecipe",value:function(e){return(0,r.Z)({method:"DELETE",url:"".concat(i,"/api/recipe/").concat(e)}).then((function(e){return e.data}))}},{key:"saveRecipe",value:function(e){return(0,r.Z)({method:"PATCH",url:"".concat(i,"/api/recipe/").concat(e.id),data:e}).then((function(e){return e.data}))}},{key:"search",value:function(e){return(0,r.Z)({method:"POST",url:"".concat(i,"/api/search"),data:e}).then((function(e){return e.data}))}},{key:"random",value:function(){return(0,r.Z)({method:"POST",url:"".concat(i,"/api/random")}).then((function(e){return e.data}))}},{key:"getRecipe",value:function(e){return(0,r.Z)({method:"GET",url:"".concat(i,"/api/recipe/").concat(e)}).then((function(e){return e.data}))}},{key:"cameraUpload",value:function(e){return(0,r.Z)({method:"POST",url:"".concat(i,"/api/camera"),data:e}).then((function(e){return e.data}))}},{key:"gmail",value:function(e){return(0,r.Z)({method:"POST",url:"".concat(i,"/api/recipe/").concat(e.id,"/gmail"),data:e}).then((function(e){return e.data}))}},{key:"sendgrid",value:function(e){return(0,r.Z)({method:"POST",url:"".concat(i,"/api/recipe/").concat(e.id,"/sendgrid"),data:e}).then((function(e){return e.data}))}},{key:"upload",value:function(e){var t=new FormData;t.append(e.filename,e.file);var n=new Request("".concat(i,"/api/upload"),{method:"POST","content-type":"multipart/form-data",body:t});return fetch(n).then((function(e){return e.json()})).catch((function(e){return alert("Server error."),e}))}}]),e}();t.Z=c},543:function(e,t,n){n.d(t,{Z:function(){return r}});n(313);var a=n(417);var o=function(e){return(0,a.jsxs)("div",{className:e.showModal?"container generic-modal":"container generic-modal hidden",children:[(0,a.jsx)("div",{className:"generic-modal-cover"}),(0,a.jsxs)("div",{className:"generic-modal-window",children:[(0,a.jsx)("div",{className:"generic-modal-header",children:(0,a.jsx)("h5",{className:"modal-title",children:e.title})}),(0,a.jsx)("div",{className:"modal-body",dangerouslySetInnerHTML:{__html:e.body}}),(0,a.jsxs)("div",{className:"modal-footer",children:[(0,a.jsx)("button",{type:"button",className:"btn "+e.primaryStyle,onClick:e.primaryAction,children:e.primaryText}),""!==e.secondaryText&&(0,a.jsx)("button",{type:"button",className:"btn "+e.secondaryStyle,onClick:e.secondaryAction,children:e.secondaryText})]})]}),(0,a.jsx)("div",{className:"modal-backdrop fade show"})]})};var r=function(e){return(0,a.jsx)(o,{showModal:e.showModal,title:"Confirmation",body:"Proceed with deletion?",primaryText:"Delete",primaryAction:e.modalAction,primaryStyle:"btn-danger",secondaryText:"Cancel",secondaryAction:e.closeModal,secondaryStyle:"btn-secondary"})}},841:function(e,t,n){function a(e,t){var n=e.tag.toUpperCase(),a=t.tag.toUpperCase(),o=0;return n>a?o=1:n<a&&(o=-1),o}n.d(t,{K:function(){return a}})},153:function(e,t,n){n.r(t),n.d(t,{default:function(){return A}});var a=n(942),o=n(413),r=n(439),d=n(313),i=n(274),c=n(374),s=n(841),l=n(417);var u=function(e){return(0,l.jsx)("div",{className:"row",children:(0,l.jsxs)("div",{className:"col-12",children:[(0,l.jsx)("button",{className:"btn button-icon",children:(0,l.jsx)("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH4wMIADAm01sivQAAALhJREFUSMftVVsKwjAQnIronMGjaHsT7+Gf+Km9hV6luYrxCv0bf1IoJZjEWFvQhYUsm+zMPsgCU4rItchapBWpgVqRF5GrHIDaE3io5xyAjvnW49s53z0HQCL1rh8Ait7lBkD5ofaZom0rAFhMMTnBtFPejZ7BPABENm4IvPYrWUYSKQP2zEv0BxhVYqfIBOwf+yoe3UJJYF+5o43pwQ3AAYARmUr4GgNwdItoD2ATGdg6Yqev75cnVBVhu6mztgkAAAAASUVORK5CYII=",alt:"delete",onClick:function(){e.handleModal("delete_tag",e.tag.id)}})}),(0,l.jsx)("button",{className:"btn button-icon",children:(0,l.jsx)("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH4wMIAC4XVsQdWAAAARBJREFUSMe9lEGKwkAQRSuDKONSNCi4nzso3sebqHiPEXWWc4CRLN2ZhW5cquABdKHwXEwJQdpOJ2n90KSpqvyXVNMl4lFAFaiKbwF14Ae46poDNV/mIRDzr5MugFmyqAKMgT12RRbzGGgCbYVcgM974Qg3RRbzUOMt4PwIuH95J0dbkubJ+DT5AgAezWOgnhkANICVlq+Bpi2eCZDb3AVQyDwNUNjcAbB0ONAw7fCMAOBLU0cXcyB6vIxpgL6mvl3a8rQTFsBEU7+6P9rakgdgmk3LZz03+ZRS7tZWnwsR+RORRRAEmzwj13lUZPX5kBfrbYCD/mK3QHt6ut2bkkP8aWAClBWyK2C8AwZAWd6pGyFQZAKARvXiAAAAAElFTkSuQmCC",alt:"edit",onClick:function(){e.handleShowEdit(e.tag)}})}),(0,l.jsx)("span",{className:"tag-name",children:e.tag.tag})]})})};var h=function(e){return(0,l.jsx)("div",{className:"results-tags",children:e.tags.length>0&&(0,l.jsx)(d.Fragment,{children:e.tags.map((function(t,n){return(0,l.jsx)(u,{tag:t,handleModal:e.handleModal,handleShowEdit:e.handleShowEdit},t.id)}))})})};var m=function(e){return(0,l.jsx)(d.Fragment,{children:e.showEdit&&(0,l.jsxs)("div",{className:"row",children:[(0,l.jsx)("div",{className:"col-12 col-md-4",children:(0,l.jsx)("input",{type:"text",placeholder:"New Tag",className:"form-control",name:"new_tag",onChange:e.handleEditTag,value:e.tag.tag})}),(0,l.jsxs)("div",{className:"col-12 col-md-3 button-row",children:[(0,l.jsx)("button",{type:"button",className:"btn btn-primary",onClick:e.handleUpdate,children:"Update"}),(0,l.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:e.handleCancelEdit,children:"Cancel"})]})]})})},g=n(543);var A=function(){var e=(0,d.useState)({tags:[],tag:{},new_tag:"",showModal:!1,showEdit:!1,delete_id:0,modalAction:""}),t=(0,r.Z)(e,2),n=t[0],u=t[1];(0,d.useEffect)((function(){A()}),[]);var A=function(){document.getElementById("spinner-holder").style.display="block",c.Z.getTags().then((function(e){document.getElementById("spinner-holder").style.display="none",u((0,o.Z)((0,o.Z)({},n),{},{tags:e}))}))};return(0,l.jsxs)(d.Fragment,{children:[(0,l.jsxs)("div",{className:"row",children:[(0,l.jsx)("div",{className:"col-12 col-md-4",children:(0,l.jsx)("input",{type:"text",placeholder:"New Tag",className:"form-control",name:"new_tag",onChange:function(e){var t=e.target,r=t.name,d=t.value;u((0,o.Z)((0,o.Z)({},n),{},(0,a.Z)({},r,d)))},value:n.new_tag||""})}),(0,l.jsx)("div",{className:"col-12 col-md-1 button-row",children:(0,l.jsx)("button",{type:"button",className:"btn btn-primary",onClick:function(){var e=JSON.parse(JSON.stringify(n));if(0===e.new_tag.length)i.Am.error("Tag can't be empty");else{document.getElementById("spinner-holder").style.display="block";var t={new_tag:e.new_tag};c.Z.addTag(t).then((function(t){if(document.getElementById("spinner-holder").style.display="none","undefined"===typeof t||"undefined"===typeof t.status||"forbidden"===t.status)i.Am.error("Denied");else if("ok"===t.status)if(0===t.id)i.Am.error("Oops, error adding tag");else{var a=e.tags;a.push({id:t.id,tag:e.new_tag}),a.sort(s.K),u((0,o.Z)((0,o.Z)({},n),{},{tags:a,new_tag:""})),i.Am.success("Tag has been added")}}))}},children:"Add"})})]}),(0,l.jsx)("hr",{size:"1",width:"80%"}),(0,l.jsx)(m,{tag:n.tag,showEdit:n.showEdit,handleEditTag:function(e){var t=JSON.parse(JSON.stringify(n)).tag,a=e.target.value;t.tag=a,u((0,o.Z)((0,o.Z)({},n),{},{tag:t}))},handleCancelEdit:function(){u((0,o.Z)((0,o.Z)({},n),{},{showEdit:!1}))},handleUpdate:function(){document.getElementById("spinner-holder").style.display="block",c.Z.updateTag(n.tag).then((function(e){if(document.getElementById("spinner-holder").style.display="none","undefined"===typeof e||"undefined"===typeof e.status||"forbidden"===e.status)i.Am.error("Denied");else if("ok"===e.status){for(var t=JSON.parse(JSON.stringify(n)).tags.slice(0),a=0;a<t.length;a++)parseInt(t[a].id,10)===parseInt(e.id,10)&&(t[a].tag=e.tag);t.sort(s.K),u((0,o.Z)((0,o.Z)({},n),{},{tags:t,tag:{},showEdit:!1}))}}))}}),(0,l.jsx)(h,{tags:n.tags,handleModal:function(e,t){u((0,o.Z)((0,o.Z)({},n),{},{showModal:!0,modalAction:e,delete_id:t}))},handleShowEdit:function(e){u((0,o.Z)((0,o.Z)({},n),{},{tag:e,showEdit:!0}))}}),(0,l.jsx)(g.Z,{showModal:n.showModal,closeModal:function(){u((0,o.Z)((0,o.Z)({},n),{},{showModal:!1}))},modalAction:function(){u((0,o.Z)((0,o.Z)({},n),{},{showModal:!1})),document.getElementById("spinner-holder").style.display="block",c.Z.deleteTag(n.delete_id).then((function(e){if(document.getElementById("spinner-holder").style.display="none","undefined"===typeof e||"undefined"===typeof e.status||"forbidden"===e.status)i.Am.error("Denied");else if("ok"===e.status){for(var t=JSON.parse(JSON.stringify(n)),a=t.tags.slice(0),r=-1,d=0;d<a.length;d++)parseInt(a[d].id,10)===parseInt(t.delete_id,10)&&(r=d);r>=0&&a.splice(r,1),u((0,o.Z)((0,o.Z)({},n),{},{tags:a})),i.Am.success("Tag has been deleted")}}))}})]})}}}]);