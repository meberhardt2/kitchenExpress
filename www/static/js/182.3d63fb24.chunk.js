"use strict";(self.webpackChunkkitchen=self.webpackChunkkitchen||[]).push([[182],{374:function(e,n,a){var t=a(671),r=a(144),i=a(573),d=window&&window.location&&window.location.hostname,o="".concat("dev.eberhardt.cloud"===d?"http://dev.eberhardt.cloud:4000":"devprod.eberhardt.cloud"===d?"http://devprod.eberhardt.cloud:4100":""),s=function(){function e(){(0,t.Z)(this,e)}return(0,r.Z)(e,null,[{key:"getBookmark",value:function(){return(0,i.Z)({method:"GET",url:o+"/api/bookmark"}).then((function(e){return e.data}))}},{key:"addBookmark",value:function(e){return(0,i.Z)({method:"POST",url:o+"/api/bookmark",data:e}).then((function(e){return e.data}))}},{key:"getTags",value:function(){return(0,i.Z)({method:"GET",url:o+"/api/tags"}).then((function(e){return e.data}))}},{key:"addTag",value:function(e){return(0,i.Z)({method:"POST",url:o+"/api/tags",data:e}).then((function(e){return e.data}))}},{key:"deleteTag",value:function(e){return(0,i.Z)({method:"DELETE",url:"".concat(o,"/api/tags/").concat(e)}).then((function(e){return e.data}))}},{key:"updateTag",value:function(e){return(0,i.Z)({method:"PATCH",url:"".concat(o,"/api/tags/").concat(e.id),data:e}).then((function(e){return e.data}))}},{key:"addRecipe",value:function(e){return(0,i.Z)({method:"POST",url:"".concat(o,"/api/recipe"),data:e}).then((function(e){return e.data}))}},{key:"deleteRecipe",value:function(e){return(0,i.Z)({method:"DELETE",url:"".concat(o,"/api/recipe/").concat(e)}).then((function(e){return e.data}))}},{key:"saveRecipe",value:function(e){return(0,i.Z)({method:"PATCH",url:"".concat(o,"/api/recipe/").concat(e.id),data:e}).then((function(e){return e.data}))}},{key:"search",value:function(e){return(0,i.Z)({method:"POST",url:"".concat(o,"/api/search"),data:e}).then((function(e){return e.data}))}},{key:"random",value:function(){return(0,i.Z)({method:"POST",url:"".concat(o,"/api/random")}).then((function(e){return e.data}))}},{key:"getRecipe",value:function(e){return(0,i.Z)({method:"GET",url:"".concat(o,"/api/recipe/").concat(e)}).then((function(e){return e.data}))}},{key:"cameraUpload",value:function(e){return(0,i.Z)({method:"POST",url:"".concat(o,"/api/camera"),data:e}).then((function(e){return e.data}))}},{key:"gmail",value:function(e){return(0,i.Z)({method:"POST",url:"".concat(o,"/api/recipe/").concat(e.id,"/gmail"),data:e}).then((function(e){return e.data}))}},{key:"sendgrid",value:function(e){return(0,i.Z)({method:"POST",url:"".concat(o,"/api/recipe/").concat(e.id,"/sendgrid"),data:e}).then((function(e){return e.data}))}},{key:"upload",value:function(e){var n=new FormData;n.append(e.filename,e.file);var a=new Request("".concat(o,"/api/upload"),{method:"POST","content-type":"multipart/form-data",body:n});return fetch(a).then((function(e){return e.json()})).catch((function(e){return alert("Server error."),e}))}}]),e}();n.Z=s},834:function(e,n,a){a.d(n,{Z:function(){return r}});a(313);var t=a(417);var r=function(e){return(0,t.jsx)("div",{className:"row",children:(0,t.jsx)("div",{className:"col-12",children:(0,t.jsxs)("a",{href:"# ",onClick:function(n){return function(n){n.preventDefault(),e.removeTag(e.tag)}(n)},children:[(0,t.jsx)("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH4wMIFyA6lPHZVgAAAXxJREFUSMfFlbtOAlEQhv+1gkizxA56wHcQ0AdAO1pj1FeA8EhUSqmYiFQqrYqY2EgtGHo/m1lzsiLsyqqTnJxkLv/MmduRfpm8RUIgK2lPUk1SUVLeRGNJQ0kdSSee573G8gqkgRbwxnKamm46KngeGDgAZ8AhUADW7RSBI+Dc0RsAuSjgYzN4BMoRAqoAI7MZf+vE0hJEfgn4MVLqAz2zvQFS85RaTuR+3G4BssCTYTTnCYOCln/akkDVKbzvCg6Cgq7a90DXsPYlac34NbvbCcxWO4QpWd4BCgm8oGhYQ5c5M2YmpNyPMGj9kE3G+DM3RUlSgPn+JykKvN3bvZXAC4I2v3MddOyuJ+CgHsL8HLSpPa2yQnp2DGPyZRs4q+IZ2FhxVTTmKaSAW1PoxVx2WeBq4bIzxZyzrkdANQL4thP5S5Q/IWdRBNQFjoGSDVEG2DTehaN3vRQ8lK6mU/hFNAEa36Vl2afvS9q1xVUKffoP1oqnnudN9F/0AZA4cSja75VSAAAAAElFTkSuQmCC",alt:"remove tag"}),"\xa0",(0,t.jsx)("span",{className:"tag-link",children:e.tag.tag})]})})})}},203:function(e,n,a){a.d(n,{Z:function(){return r}});a(313);var t=a(417);var r=function(e){return(0,t.jsx)("div",{className:"row",children:(0,t.jsx)("div",{className:"col-12",children:(0,t.jsxs)("a",{href:"# ",onClick:function(n){return function(n){n.preventDefault(),e.addTag(e.tag)}(n)},children:[(0,t.jsx)("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH4wMIFxgOotqRGAAAAYFJREFUSMfFlb9OAkEQxr+zgkhzxA56wHcQ0AdAO1tj1FeA8EhUSumfRKRSaf2f2EgtGHp/NnNmcx53Rzh1ks0mM998MzuzOyv9snhxRqAoaUdSS1JVUtlMY0mPkvqSjj3Pe18oKpAHusAHyTI1bD4teRkYOQSnwAFQAVZtVYFD4MzBjYBSGvKxOTwB9RQJNYBn8xnPDWJlCTK/BPwFSuoDA/O9AXJRoK6Tub/obQGKwItxdKKMQUPrMSRDYBhjbzqN913DftDQhCwBSMCcG2xPklZM37K9l8Hb6oU4Jas7QCWDE1QN9ugqZ6YsRNQ8SYYhn4LpZ26JspSA8/NPShREu7d9I4MTBNf8zg3Qt303gwC7Ic7vhza1ozWWeGhbxjH5MQ2cUfEKrC05KtpRgBxwa4DBgsOuCFzFDjsDlpxx/Qw0U5BvOpm/pfkTSpZFIOfAEVCzR1QA1k134eCuE8lD5eo4jY+TCdCeV5akT9+XtG2Dqxb69B/sKp54njfRf8kXFOiYEKlDfDgAAAAASUVORK5CYII=",alt:"add tag"}),"\xa0",(0,t.jsx)("span",{className:"tag-link",children:e.tag.tag})]})})})}},543:function(e,n,a){a.d(n,{Z:function(){return i}});a(313);var t=a(417);var r=function(e){return(0,t.jsxs)("div",{className:e.showModal?"container generic-modal":"container generic-modal hidden",children:[(0,t.jsx)("div",{className:"generic-modal-cover"}),(0,t.jsxs)("div",{className:"generic-modal-window",children:[(0,t.jsx)("div",{className:"generic-modal-header",children:(0,t.jsx)("div",{children:e.title})}),(0,t.jsxs)("div",{className:"generic-modal-scroll",children:[(0,t.jsx)("div",{dangerouslySetInnerHTML:{__html:e.body}}),(0,t.jsxs)("div",{className:"generic-modal-button-container",children:[(0,t.jsx)("button",{type:"button",className:"btn "+e.primaryStyle,onClick:e.primaryAction,children:e.primaryText}),""!==e.secondaryText&&(0,t.jsx)("button",{type:"button",className:"btn "+e.secondaryStyle,onClick:e.secondaryAction,children:e.secondaryText})]})]})]})]})};var i=function(e){return(0,t.jsx)(r,{showModal:e.showModal,title:"Confirmation",body:"Proceed with deletion?",primaryText:"Delete",primaryAction:e.modalAction,primaryStyle:"btn-danger",secondaryText:"Cancel",secondaryAction:e.closeModal,secondaryStyle:"btn-secondary"})}},841:function(e,n,a){function t(e,n){var a=e.tag.toUpperCase(),t=n.tag.toUpperCase(),r=0;return a>t?r=1:a<t&&(r=-1),r}a.d(n,{K:function(){return t}})},182:function(e,n,a){a.r(n),a.d(n,{default:function(){return f}});var t=a(942),r=a(413),i=a(439),d=a(313),o=a(274),s=a(467),c=a(374),l=a(203),u=a(834),m=a(417);var g=function(e){return(0,m.jsxs)(d.Fragment,{children:[(0,m.jsxs)("div",{className:"row",children:[(0,m.jsx)("div",{className:"col-12 col-md-2",children:"Name"}),(0,m.jsx)("div",{className:"col-12 col-md-7",children:(0,m.jsx)("input",{type:"text",className:"form-control",name:"recipe_name",onChange:e.handleInputChange,value:e.recipe_name||""})}),(0,m.jsx)("div",{className:"col-12 col-md-2",children:(0,m.jsxs)("label",{children:[(0,m.jsx)("input",{type:"checkbox",value:"y",name:"bookmarked",checked:"y"===e.bookmarked,onChange:e.handleInputChange})," bookmarked"]})})]}),(0,m.jsxs)("div",{className:"row",children:[(0,m.jsx)("div",{className:"col-12 col-md-2"}),(0,m.jsx)("div",{className:"col-12 col-md-5",children:(0,m.jsxs)("div",{className:"tag-holder",children:[(0,m.jsx)("div",{className:"tag-holder-header",children:"Assigned Tag(s)"}),e.tags.map((function(n,a){return(0,m.jsx)(u.Z,{tag:n,removeTag:e.removeTag},n.id)}))]})}),(0,m.jsx)("div",{className:"col-12 col-md-5",children:(0,m.jsxs)("div",{className:"tag-holder",children:[(0,m.jsx)("div",{className:"tag-holder-header",children:"Available Tag(s)"}),e.all_tags.map((function(n,a){return(0,m.jsx)(l.Z,{tag:n,addTag:e.addTag},n.id)}))]})})]}),(0,m.jsxs)("div",{className:"row",children:[(0,m.jsx)("div",{className:"col-12 col-md-2",children:"Ingredients"}),(0,m.jsx)("div",{className:"col-12 col-md-10",children:(0,m.jsx)("textarea",{className:"form-control ingredients",name:"ingredients",onChange:e.handleInputChange,value:e.ingredients||""})})]}),(0,m.jsxs)("div",{className:"row",children:[(0,m.jsx)("div",{className:"col-12 col-md-2",children:"Recipe"}),(0,m.jsx)("div",{className:"col-12 col-md-10",children:(0,m.jsx)("textarea",{className:"form-control recipe",name:"recipe",onChange:e.handleInputChange,value:e.recipe||""})})]})]})};var h=function(e){return(0,m.jsxs)(d.Fragment,{children:[(0,m.jsx)("div",{className:"row button-row",children:(0,m.jsxs)("div",{className:"col-12",children:[0===parseInt(e.id)&&(0,m.jsx)("button",{type:"button",className:"btn btn-primary",onClick:e.addRecipe,children:"Add"}),0!==parseInt(e.id)&&(0,m.jsxs)(d.Fragment,{children:[(0,m.jsx)("button",{type:"button",className:"btn btn-primary",onClick:e.saveRecipe,children:"Save"}),(0,m.jsx)("button",{type:"button",className:"btn btn-danger",onClick:function(){e.handleModal("delete_recipe")},children:"Delete"})]})]})}),(0,m.jsx)("br",{}),(0,m.jsx)("br",{})]})},p=a(841),A=a(543);var f=function(){var e=(0,s.UO)().id,n=(0,d.useState)({id:0,recipe_name:"",recipe:"",bookmarked:"n",ingredients:"",tags:[],all_tags:[],all_tags_immutable:[],showModal:!1,delete_id:0,modalAction:""}),a=(0,i.Z)(n,2),l=a[0],u=a[1];(0,d.useEffect)((function(){document.getElementById("spinner-holder").style.display="block",c.Z.getTags().then((function(n){u((0,r.Z)((0,r.Z)({},l),{},{all_tags:n,all_tags_immutable:n})),0!==parseInt(e,0)?f(e):document.getElementById("spinner-holder").style.display="none"}))}),[]);var f=function(e){c.Z.getRecipe(e).then((function(e){for(var n=0;n<e.tags.length;n++)v(e.tags[n]);u((0,r.Z)((0,r.Z)({},l),{},{id:e.id,recipe_name:e.recipe_name,recipe:e.recipe,bookmarked:e.bookmarked,ingredients:e.ingredients,tags:e.tags})),document.getElementById("spinner-holder").style.display="none"}))},v=function(e){for(var n=JSON.parse(JSON.stringify(l)),a=n.all_tags.slice(0),t=n.tags.slice(0),i=-1,d=0;d<a.length;d++)parseInt(a[d].id,10)===parseInt(e.id,10)&&(i=d);i>=0&&a.splice(i,1),t.push({id:e.id,tag:e.tag}),t.sort(p.K),u((0,r.Z)((0,r.Z)({},l),{},{all_tags:a,tags:t}))},y=function(){var e=JSON.parse(JSON.stringify(l)),n=!1;if(""===l.recipe_name&&(n=!0,o.Am.error("Missing recipe name")),""===l.recipe&&(n=!0,o.Am.error("Missing recipe")),0===l.tags.length&&(n=!0,o.Am.error("Missing tag(s)")),""===l.ingredients&&(n=!0,o.Am.error("Missing ingrediants")),!n){var a={recipe_name:e.recipe_name,recipe:e.recipe,bookmarked:e.bookmarked,ingredients:e.ingredients,tags:e.tags};document.getElementById("spinner-holder").style.display="block",c.Z.addRecipe(a).then((function(n){document.getElementById("spinner-holder").style.display="none","undefined"===typeof n||"undefined"===typeof n.status||"forbidden"===n.status?o.Am.error("Denied"):"ok"===n.status&&(0!==parseInt(n.id)?(o.Am.success("Recipe added!"),u((0,r.Z)((0,r.Z)({},l),{},{recipe_name:"",recipe:"",bookmarked:"n",ingredients:"",tags:[],all_tags:e.all_tags_immutable}))):o.Am.error("There was an error saving"))}))}},k=function(){var e=JSON.parse(JSON.stringify(l)),n=!1;if(""===l.recipe_name&&(n=!0,o.Am.error("Missing recipe name")),""===l.recipe&&(n=!0,o.Am.error("Missing recipe")),0===l.tags.length&&(n=!0,o.Am.error("Missing tag(s)")),""===l.ingredients&&(n=!0,o.Am.error("Missing ingrediants")),!n){var a={id:e.id,recipe_name:e.recipe_name,recipe:e.recipe,bookmarked:e.bookmarked,ingredients:e.ingredients,tags:e.tags};document.getElementById("spinner-holder").style.display="block",c.Z.saveRecipe(a).then((function(e){document.getElementById("spinner-holder").style.display="none","undefined"===typeof e||"undefined"===typeof e.status||"forbidden"===e.status?o.Am.error("Denied"):"ok"===e.status&&o.Am.success("Recipe saved!")}))}},x=function(e,n){u((0,r.Z)((0,r.Z)({},l),{},{showModal:!0,modalAction:e}))};return(0,m.jsxs)(d.Fragment,{children:[(0,m.jsx)(h,{id:l.id,addRecipe:y,saveRecipe:k,handleModal:x}),(0,m.jsx)(g,(0,r.Z)((0,r.Z)({handleInputChange:function(e){var n=e.target,a=n.name,i="";i="checkbox"===n.type?n.checked?"y":"n":n.value,u((0,r.Z)((0,r.Z)({},l),{},(0,t.Z)({},a,i)))}},l),{},{addTag:v,removeTag:function(e){for(var n=JSON.parse(JSON.stringify(l)),a=n.all_tags.slice(0),t=n.tags.slice(0),i=-1,d=0;d<t.length;d++)parseInt(t[d].id,10)===parseInt(e.id,10)&&(i=d);i>=0&&t.splice(i,1),a.push({id:e.id,tag:e.tag}),a.sort(p.K),u((0,r.Z)((0,r.Z)({},l),{},{all_tags:a,tags:t}))}})),(0,m.jsx)(h,{id:l.id,addRecipe:y,saveRecipe:k,handleModal:x}),(0,m.jsx)(A.Z,{showModal:l.showModal,closeModal:function(){u((0,r.Z)((0,r.Z)({},l),{},{showModal:!1}))},modalAction:function(){var e=JSON.parse(JSON.stringify(l));u((0,r.Z)((0,r.Z)({},l),{},{showModal:!1})),document.getElementById("spinner-holder").style.display="block",c.Z.deleteRecipe(e.id).then((function(n){document.getElementById("spinner-holder").style.display="none","undefined"===typeof n||"undefined"===typeof n.status||"forbidden"===n.status?o.Am.error("Denied"):"ok"===n.status&&(u((0,r.Z)((0,r.Z)({},l),{},{showModal:!1,id:0,recipe_name:"",recipe:"",bookmarked:"n",ingredients:"",tags:[],all_tags:e.all_tags_immutable})),o.Am.success("Recipe has been deleted"))}))}})]})}}}]);