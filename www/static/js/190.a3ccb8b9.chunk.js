"use strict";(self.webpackChunkkitchen=self.webpackChunkkitchen||[]).push([[190],{374:function(e,n,a){var t=a(671),r=a(144),c=a(573),o=window&&window.location&&window.location.hostname;var i="".concat("devprod.eberhardt.cloud"===o?"http://devprod.eberhardt.cloud:4100":""),d=function(){function e(){(0,t.Z)(this,e)}return(0,r.Z)(e,null,[{key:"getBookmark",value:function(){return(0,c.Z)({method:"GET",url:i+"/api/bookmark"}).then((function(e){return e.data}))}},{key:"addBookmark",value:function(e){return(0,c.Z)({method:"POST",url:i+"/api/bookmark",data:e}).then((function(e){return e.data}))}},{key:"getTags",value:function(){return(0,c.Z)({method:"GET",url:i+"/api/tags"}).then((function(e){return e.data}))}},{key:"addTag",value:function(e){return(0,c.Z)({method:"POST",url:i+"/api/tags",data:e}).then((function(e){return e.data}))}},{key:"deleteTag",value:function(e){return(0,c.Z)({method:"DELETE",url:"".concat(i,"/api/tags/").concat(e)}).then((function(e){return e.data}))}},{key:"updateTag",value:function(e){return(0,c.Z)({method:"PATCH",url:"".concat(i,"/api/tags/").concat(e.id),data:e}).then((function(e){return e.data}))}},{key:"addRecipe",value:function(e){return(0,c.Z)({method:"POST",url:"".concat(i,"/api/recipe"),data:e}).then((function(e){return e.data}))}},{key:"deleteRecipe",value:function(e){return(0,c.Z)({method:"DELETE",url:"".concat(i,"/api/recipe/").concat(e)}).then((function(e){return e.data}))}},{key:"saveRecipe",value:function(e){return(0,c.Z)({method:"PATCH",url:"".concat(i,"/api/recipe/").concat(e.id),data:e}).then((function(e){return e.data}))}},{key:"search",value:function(e){return(0,c.Z)({method:"POST",url:"".concat(i,"/api/search"),data:e}).then((function(e){return e.data}))}},{key:"random",value:function(){return(0,c.Z)({method:"POST",url:"".concat(i,"/api/random")}).then((function(e){return e.data}))}},{key:"getRecipe",value:function(e){return(0,c.Z)({method:"GET",url:"".concat(i,"/api/recipe/").concat(e)}).then((function(e){return e.data}))}},{key:"cameraUpload",value:function(e){return(0,c.Z)({method:"POST",url:"".concat(i,"/api/camera"),data:e}).then((function(e){return e.data}))}},{key:"gmail",value:function(e){return(0,c.Z)({method:"POST",url:"".concat(i,"/api/recipe/").concat(e.id,"/gmail"),data:e}).then((function(e){return e.data}))}},{key:"sendgrid",value:function(e){return(0,c.Z)({method:"POST",url:"".concat(i,"/api/recipe/").concat(e.id,"/sendgrid"),data:e}).then((function(e){return e.data}))}},{key:"upload",value:function(e){var n=new FormData;n.append(e.filename,e.file);var a=new Request("".concat(i,"/api/upload"),{method:"POST","content-type":"multipart/form-data",body:n});return fetch(a).then((function(e){return e.json()})).catch((function(e){return alert("Server error."),e}))}}]),e}();n.Z=d},190:function(e,n,a){a.r(n),a.d(n,{default:function(){return p}});var t=a(942),r=a(413),c=a(439),o=a(313),i=a(274),d=a(374),u=a(417);var l=function(e){return(0,u.jsxs)(o.Fragment,{children:[(0,u.jsxs)("div",{className:"row",children:[(0,u.jsx)("div",{className:"col-12 col-md-2",children:"Name"}),(0,u.jsx)("div",{className:"col-12 col-md-7",children:(0,u.jsx)("input",{type:"text",className:"form-control",name:"recipe_name",onChange:e.handleInputChange,value:e.recipe_name||""})})]}),(0,u.jsxs)("div",{className:"row",children:[(0,u.jsx)("div",{className:"col-12 col-md-2",children:"Recipe"}),(0,u.jsx)("div",{className:"col-12 col-md-8",children:(0,u.jsx)("textarea",{name:"recipe",value:e.recipe,onChange:e.handleInputChange,className:"form-control ocr-textbox"})})]})]})};var s=function(e){return(0,u.jsxs)(o.Fragment,{children:[(0,u.jsx)("br",{}),(0,u.jsx)("br",{}),(0,u.jsx)("div",{className:"row",children:(0,u.jsxs)("div",{className:"col-12",children:["Image:\xa0\xa0\xa0\xa0",(0,u.jsx)("input",{name:"imagefile",id:"imagefile",type:"file",onChange:e.handleUpload})]})})]})};var m=function(e){return(0,u.jsxs)(o.Fragment,{children:[(0,u.jsx)("div",{className:"row button-row",children:(0,u.jsxs)("div",{className:"col-12",children:[(0,u.jsx)("button",{type:"button",className:"btn btn-primary",onClick:e.addRecipe,children:"Add"}),(0,u.jsx)("button",{type:"button",className:"btn btn-primary",onClick:e.backToUpload,children:"Back To Upload"})]})}),(0,u.jsx)("br",{}),(0,u.jsx)("br",{})]})};var p=function(){var e=(0,o.useState)({showForm:!1,showUpload:!0,image:"",recipe:"",recipe_name:""}),n=(0,c.Z)(e,2),a=n[0],p=n[1],h=function(){p((0,r.Z)((0,r.Z)({},a),{},{recipe_name:"",recipe:"",showUpload:!0,showForm:!1}))},f=function(){var e=JSON.parse(JSON.stringify(a)),n=!1;if(""===a.recipe_name&&(n=!0,i.Am.error("Missing recipe name")),""===a.recipe&&(n=!0,i.Am.error("Missing recipe")),!n){var t={recipe_name:e.recipe_name,recipe:e.recipe,bookmarked:"n",ingredients:"",tags:[]};document.getElementById("spinner-holder").style.display="block",d.Z.addRecipe(t).then((function(e){document.getElementById("spinner-holder").style.display="none","undefined"===typeof e||"undefined"===typeof e.status||"forbidden"===e.status?i.Am.error("Denied"):"ok"===e.status&&(0!==parseInt(e.id)?(i.Am.success("Recipe added!"),p((0,r.Z)((0,r.Z)({},a),{},{recipe_name:"",recipe:"",showCamera:!0,showPictureForm:!1}))):i.Am.error("There was an error saving"))}))}};return(0,u.jsxs)(o.Fragment,{children:[(0,u.jsx)("div",{className:a.showUpload?"":"hidden",children:(0,u.jsx)(s,{handleUpload:function(e){var n;n=document.getElementById("imagefile"),document.getElementById("spinner-holder").style.display="block";var t={file:n.files[0],filename:"imagefile"};d.Z.upload(t).then((function(e){document.getElementById("spinner-holder").style.display="none","undefined"===typeof e||"undefined"===typeof e.status||"forbidden"===e.status?i.Am.error("Denied"):"ok"===e.status&&p((0,r.Z)((0,r.Z)({},a),{},{recipe:e.text,showUpload:!1,showForm:!0}))}))}})}),(0,u.jsxs)("div",{className:a.showForm?"":"hidden",children:[(0,u.jsx)(m,{addRecipe:f,backToUpload:h}),(0,u.jsx)(l,{handleInputChange:function(e){var n=e.target,c=n.name,o=n.value;p((0,r.Z)((0,r.Z)({},a),{},(0,t.Z)({},c,o)))},recipe:a.recipe,recipe_name:a.recipe_name}),(0,u.jsx)(m,{addRecipe:f,backToUpload:h})]})]})}}}]);